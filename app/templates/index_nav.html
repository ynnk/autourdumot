<!DOCTYPE html>
<html lang="en">
<head>
    <title> Dictionnaires et synonymes - tmuse - </title>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--  SemUI CSS    -->
    <link rel="stylesheet" href="{{url_for('static', filename='lib/semantic-UI-1.8.1-dist/semantic.min.css')}}" type="text/css" />

    <!--  our CSS    -->
    <link rel="stylesheet" href="{{url_for('static', filename='app_graph.css')}}" type="text/css" />
    <link rel="stylesheet" href="{{url_for('static', filename='engine.css')}}" type="text/css" />

    <!--  require JS    -->
    <script data-main="{{url_for('static', filename='main')}}" src="{{url_for('static', filename='lib/require.js')}}"></script>

    <!-- templates -->
    <script id="ClusterLabel" type="text/template">
        <a href='#' class='clabel'><%= label %></a>
    </script>
    
    <script id="ListLabel" type="text/template">
            <div class='puce' style='background-color:rgb(<%=color%>);'></div>
            <a href="#" class=''><%=rank %>. <%=form %></a>
    </script>

    
    <script id="query_form_tmpl" type="text/template">
              <input type='text' id="searchQueryInput" class="prompt " placeholder="<%= placeholder %>" required="" />
              <i class="search icon"></i>
    </script>

</head>
<body>

    <div class="ui page grid" style='background:#222'>
        
        <div class="two column row">
            <div class="center  column">
                    <h2 class="ui inverted header">Dictionnaire et synonymes
                        <div class="sub header">Explorations dans le petit monde des mots.</div>
                    </h2>
            </div>

            <div class="right aligned column">
                <nav class="ui text inverted menu navbar ">
                    <a class="item "><i class="circular inverted teal large mail outline icon "></i>  </a>
                    <div class="item right">
                      <div class="ui icon top right pointing dropdown " >
                            <i class="circular inverted teal large cubes  icon"></i>
                            <div class="menu">
                                <div class="item "><i class=" help teal icon "></i> Aide </div>
                                <div class="divider"></div>
                                <div class="item "><i class=" bug teal icon "></i> Signaler un bug </div>
                                <div class="item "><i class=" comments teal icon "></i> Votre avis nous intéresse </div>
                                <div class="divider"></div>
                                <div class="item about"><i class=" info teal icon "></i> A propos </div>
                            </div>
                      </div>
                    </div>
                    <a class="item "><i class="circular inverted teal large github icon "></i>  </a>
                </nav>
            </div>
        </div> <!--row-->
    </div> <!--grid-->


        
    <div class="ui page grid">
        <div class="row" style="padding-bottom:2px">
        <div class="column center aligned">
            
            <nav class="ui menu navbar ">

                <div class="item centered" style="margin-top:0px" >
                    <div id="query_form" class="ui input icon"></div>
                    <div id="query_complete"></div>
                </div>
            </nav>
    
            <div id="maintabs" class="ui bottom attached  teal  menu">
                  <a class="ui item " data-tab='tab-graph'>
                      <i class="cube icon"></i>
                      <span class='hidden-xs'>Graph</span>
                  </a>
                  <a class="ui item" data-tab='tab-clust'>
                      <i class="block layout icon"></i>
                      <span class='hidden-xs'>Clustering</span>
                  </a>
                  
                  <a class="ui item" data-tab='tab-list'>
                      <i class="list layout icon"></i>
                      <span class='hidden-xs'>Liste</span>
                  </a>
                  
                  <a class="ui item" data-tab='tab-def'>
                      <i class="book icon"></i>
                      <span class='hidden-xs'>Définition</span>
                  </a>
            </div>



            <div class="ui tab itemview active" data-tab="tab-graph">
                <div id='vz_threejs_main' class=''></div>            
            </div>

            <div class="ui tab itemview" data-tab="tab-clust">
                <h1> <i class="block layout icon"></i></h1>
                <div id='clustering_items' class='subitem' style=''><ul></ul></div>
            </div>

            <div class="ui tab itemview " data-tab="tab-list">
                <h1><i class="list layout icon"></i>&nbsp;</h1>
                <div id='proxemy_items' class='ui left aligned segment subitem' style=''><ul></ul></div>
            </div>

            <div class="ui tab  itemview " data-tab="tab-def">

                
                <div id='wkdef' class='ui left aligned segment subitem' style=''>
                    <nav  class="ui menu navbar ">
                       <div class="item right">
                          <div class="ui icon top right pointing dropdown ">
                                <i class="book down icon"></i>
                                <div class="menu">
                                    <a class="item  active" data-desc='short'><i class="caret right teal icon"></i> Description courte </a>
                                    <a class="item " data-desc='long'><i class=" caret right teal icon "></i>  Description complète</a>
                                </div>
                          </div>
                        </div>
                    </nav>
                    <div class="def-content"></div>
                </div>
            </div>


            <div id="footer" class="ui center aligned attached top segment">
                Données synonymiques <a href='http://jeuxdemots.org' class="ui teal">Jeux de mots</a> - 
                Définitions <a href='http://wiktionary.org'>Wiktionary.org</a> - 
                Réalisation <a href="http://kodexlab.com">Kodex·Lab</a> 2014 
            </div>
            
        </div>
            
        </div>
        </div>

<script>
    require([
        "app_graph"
    ],  function(App){
        // The "app" dependency is passed in as "App"
        app = new App( {
                       root_url:"{{ root_url }}",
                       engine_url:"{{ engine_url }}", 
                       complete_url:"{{ complete_url }}", 
                       def_url:"{{ def_url }}", 
        });
        app.start();
        
        // panel tabs
        $('#maintabs .item').tab();
        
        // cubes dropdown 
        $('.dropdown')
          .dropdown({
            // you can use any ui transition
            transition: 'drop'
          })
        ;

        // wk dropdown
        // TODO make a dedicated view for WK def  ?
        $('#wkdef .dropdown')
          .dropdown({
            onChange: function(value, text, $selectedItem) {
              shortdesc = $("#wkdef nav .menu a.item.active").data('desc') == "short";
              if (shortdesc)
                $("#wkdef .wk-hiddable").hide()
              else
                $("#wkdef .wk-hiddable").show()
            }
          })
        ;

        // about menu
        $("a.about").on('click', function(){
           $('.ui.modal')
              .modal({transition:'scale', duration:300})
              .modal('show')
            ;
        });

        
        // resize window event 
        var min_height = 250;
        
        var _window_resized = function(){
            var win = $(this); //this = window
            size =  $(window).height()-$("nav").height() - $(".footer").height() - 80;
            size = size < min_height ? min_height : size;
            $(".itemview").height(size);
            app.views.gviz.resize_rendering();
            $("#wkdef .def-content").height(size - $("#wkdef nav").height() -30);
        }
        
        app.listenTo(app.models.cellist, 'play:complete', function() {
            console.log("complete", "resize");
            _window_resized();

            } );

        $('#maintabs .item').click(_window_resized);

        $(window).on('resize', _window_resized );

        _window_resized();


    })();
</script>

<div class="ui dimmer modals page " style="">

    <div class="ui modal ">
            <i class="close icon"></i>

            <div class="header">Dictionnaire et synonymes</div>

            <div class="content">        
                <p>
                    Données synonymiques <a href='http://jeuxdemots.org'>Jeux de mots</a> <br />
                    Définitions <a href='http://wiktionary.org'>Wiktionary.org</a> <br />
                    Réalisation <a href="http://kodexlab.com">Kodex·Lab</a> 2014 <br />
                </p>
                <p>
                    remarques et cmt : <a href="https://proxteam.eu/pad/p/cello_tmuse">https://proxteam.eu/pad/p/cello_tmuse</a>
                </p>
            </div>
    </div>

</div>

</body>
</html>
